<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PyScript Fetch Example</title>
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css">
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
</head>
<body>
    <h1>PyScriptでファイルを取得</h1>
    <button id="fetch-button">ファイルを取得</button>
    <pre id="output"></pre>

    <script type="py">
        from js import fetch, console

        async def fetch_file():
            response = await fetch('./04_pys_fetch.html')  # 取得したいファイルのパス
            if response.ok:
                text = await response.text()
                console.log(text)  # コンソールに出力
                output_element = Element('output')
                output_element.element.innerText = text  # 取得した内容を表示
            else:
                console.log('ファイルの取得に失敗しました。')

        def on_button_click(event):
            fetch_file()

        # ボタンにクリックイベントを追加
        button = Element('fetch-button')
        button.element.onclick = on_button_click
    </script>
</body>
</html>
